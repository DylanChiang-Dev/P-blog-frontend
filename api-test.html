<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog API æ¸¬è©¦å·¥å…·</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 32px;
            margin-bottom: 10px;
        }

        .header p {
            opacity: 0.9;
        }

        .content {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 0;
        }

        .sidebar {
            background: #f8f9fa;
            border-right: 1px solid #dee2e6;
            padding: 20px;
            max-height: calc(100vh - 200px);
            overflow-y: auto;
        }

        .sidebar h3 {
            font-size: 14px;
            text-transform: uppercase;
            color: #6c757d;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .test-group {
            margin-bottom: 25px;
        }

        .test-btn {
            display: block;
            width: 100%;
            padding: 10px 15px;
            margin-bottom: 8px;
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            cursor: pointer;
            text-align: left;
            font-size: 14px;
            transition: all 0.2s;
        }

        .test-btn:hover {
            background: #e9ecef;
            border-color: #667eea;
        }

        .test-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .main-panel {
            padding: 30px;
            max-height: calc(100vh - 200px);
            overflow-y: auto;
        }

        .test-section {
            display: none;
        }

        .test-section.active {
            display: block;
        }

        .test-form {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .form-row {
            margin-bottom: 15px;
        }

        .form-row label {
            display: block;
            font-weight: 600;
            margin-bottom: 5px;
            font-size: 14px;
        }

        .form-row input,
        .form-row textarea,
        .form-row select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ced4da;
            border-radius: 6px;
            font-size: 14px;
        }

        .form-row textarea {
            min-height: 100px;
            font-family: monospace;
        }

        .btn-primary {
            background: #667eea;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-primary:hover {
            background: #5568d3;
        }

        .result-box {
            background: #212529;
            color: #0f0;
            padding: 20px;
            border-radius: 12px;
            margin-top: 20px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            max-height: 400px;
            overflow-y: auto;
        }

        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            margin-left: 10px;
        }

        .status-success {
            background: #d4edda;
            color: #155724;
        }

        .status-error {
            background: #f8d7da;
            color: #721c24;
        }

        .auth-info {
            background: #fff3cd;
            border: 1px solid #ffc107;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .auth-info strong {
            display: block;
            margin-bottom: 5px;
        }

        .auth-info code {
            background: #fff;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 12px;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>ğŸš€ Blog API æ¸¬è©¦å·¥å…·</h1>
            <p>Base URL: https://pyqapi.3331322.xyz</p>
        </div>
        <div class="content">
            <div class="sidebar">
                <div class="test-group">
                    <h3>èªè­‰</h3>
                    <button class="test-btn active" onclick="showTest('login')">ç™»å…¥</button>
                    <button class="test-btn" onclick="showTest('refresh')">åˆ·æ–° Token</button>
                    <button class="test-btn" onclick="showTest('logout')">ç™»å‡º</button>
                </div>
                <div class="test-group">
                    <h3>æ–‡ç« ç®¡ç†</h3>
                    <button class="test-btn" onclick="showTest('articles-list')">æ–‡ç« åˆ—è¡¨</button>
                    <button class="test-btn" onclick="showTest('article-detail')">æ–‡ç« è©³æƒ…</button>
                    <button class="test-btn" onclick="showTest('article-create')">å‰µå»ºæ–‡ç« </button>
                    <button class="test-btn" onclick="showTest('article-update')">æ›´æ–°æ–‡ç« </button>
                    <button class="test-btn" onclick="showTest('article-delete')">åˆªé™¤æ–‡ç« </button>
                </div>
                <div class="test-group">
                    <h3>è©•è«–ç®¡ç†</h3>
                    <button class="test-btn" onclick="showTest('comments-list')">è©•è«–åˆ—è¡¨</button>
                    <button class="test-btn" onclick="showTest('comment-create')">ç™¼è¡¨è©•è«–</button>
                    <button class="test-btn" onclick="showTest('comment-approve')">å¯©æ ¸è©•è«–</button>
                </div>
                <div class="test-group">
                    <h3>åˆ†é¡ & æ¨™ç±¤</h3>
                    <button class="test-btn" onclick="showTest('categories')">åˆ†é¡åˆ—è¡¨</button>
                    <button class="test-btn" onclick="showTest('tags')">æ¨™ç±¤åˆ—è¡¨</button>
                </div>
                <div class="test-group">
                    <h3>åª’é«”</h3>
                    <button class="test-btn" onclick="showTest('upload')">åœ–ç‰‡ä¸Šå‚³</button>
                </div>
            </div>

            <div class="main-panel">
                <!-- ç™»å…¥ -->
                <div id="test-login" class="test-section active">
                    <h2>ç™»å…¥ API</h2>
                    <div class="test-form">
                        <div class="form-row">
                            <label>Email</label>
                            <input type="email" id="login-email" value="admin@example.com">
                        </div>
                        <div class="form-row">
                            <label>å¯†ç¢¼</label>
                            <input type="password" id="login-password" value="">
                        </div>
                        <button class="btn-primary" onclick="testLogin()">ç™¼é€è«‹æ±‚</button>
                    </div>
                    <div id="result-login" class="result-box"></div>
                </div>

                <!-- æ–‡ç« åˆ—è¡¨ -->
                <div id="test-articles-list" class="test-section">
                    <h2>æ–‡ç« åˆ—è¡¨ API</h2>
                    <div class="auth-info">
                        <strong>âš ï¸ ç„¡éœ€èªè­‰</strong>
                        å¯é¸åƒæ•¸: limit, cursor, status
                    </div>
                    <div class="test-form">
                        <div class="form-row">
                            <label>Status</label>
                            <select id="articles-status">
                                <option value="">å…¨éƒ¨</option>
                                <option value="published">å·²ç™¼ä½ˆ</option>
                                <option value="draft">è‰ç¨¿</option>
                            </select>
                        </div>
                        <div class="form-row">
                            <label>Limit</label>
                            <input type="number" id="articles-limit" value="10">
                        </div>
                        <button class="btn-primary" onclick="testArticlesList()">ç™¼é€è«‹æ±‚</button>
                    </div>
                    <div id="result-articles-list" class="result-box"></div>
                </div>

                <!-- æ–‡ç« è©³æƒ… -->
                <div id="test-article-detail" class="test-section">
                    <h2>æ–‡ç« è©³æƒ… API</h2>
                    <div class="auth-info">
                        <strong>âš ï¸ ç„¡éœ€èªè­‰</strong>
                    </div>
                    <div class="test-form">
                        <div class="form-row">
                            <label>æ–‡ç«  Slug</label>
                            <input type="text" id="article-slug" value="welcome-to-astro-blog">
                        </div>
                        <button class="btn-primary" onclick="testArticleDetail()">ç™¼é€è«‹æ±‚</button>
                    </div>
                    <div id="result-article-detail" class="result-box"></div>
                </div>

                <!-- å‰µå»ºæ–‡ç«  -->
                <div id="test-article-create" class="test-section">
                    <h2>å‰µå»ºæ–‡ç«  API</h2>
                    <div class="auth-info">
                        <strong>ğŸ”’ éœ€è¦èªè­‰</strong>
                        è«‹å…ˆç™»å…¥ä»¥ç²å– access_token
                    </div>
                    <div class="test-form">
                        <div class="form-row">
                            <label>æ¨™é¡Œ</label>
                            <input type="text" id="create-title" value="æ¸¬è©¦æ–‡ç« ">
                        </div>
                        <div class="form-row">
                            <label>å…§å®¹ (Markdown)</label>
                            <textarea id="create-content"># æ¸¬è©¦æ–‡ç« 

é€™æ˜¯ä¸€ç¯‡æ¸¬è©¦æ–‡ç« çš„å…§å®¹ã€‚</textarea>
                        </div>
                        <div class="form-row">
                            <label>æ‘˜è¦</label>
                            <input type="text" id="create-excerpt" value="é€™æ˜¯æ¸¬è©¦æ‘˜è¦">
                        </div>
                        <div class="form-row">
                            <label>ç‹€æ…‹</label>
                            <select id="create-status">
                                <option value="draft">è‰ç¨¿</option>
                                <option value="published">å·²ç™¼ä½ˆ</option>
                            </select>
                        </div>
                        <div class="form-row">
                            <label>æ¨™ç±¤ (é€—è™Ÿåˆ†éš”)</label>
                            <input type="text" id="create-tags" value="æ¸¬è©¦,API">
                        </div>
                        <button class="btn-primary" onclick="testArticleCreate()">ç™¼é€è«‹æ±‚</button>
                    </div>
                    <div id="result-article-create" class="result-box"></div>
                </div>

                <!-- æ›´æ–°æ–‡ç«  -->
                <div id="test-article-update" class="test-section">
                    <h2>æ›´æ–°æ–‡ç«  API</h2>
                    <div class="auth-info">
                        <strong>ğŸ”’ éœ€è¦èªè­‰</strong>
                    </div>
                    <div class="test-form">
                        <div class="form-row">
                            <label>æ–‡ç«  Slug</label>
                            <input type="text" id="update-slug" value="">
                        </div>
                        <div class="form-row">
                            <label>æ–°æ¨™é¡Œ</label>
                            <input type="text" id="update-title" value="">
                        </div>
                        <button class="btn-primary" onclick="testArticleUpdate()">ç™¼é€è«‹æ±‚</button>
                    </div>
                    <div id="result-article-update" class="result-box"></div>
                </div>

                <!-- åˆªé™¤æ–‡ç«  -->
                <div id="test-article-delete" class="test-section">
                    <h2>åˆªé™¤æ–‡ç«  API</h2>
                    <div class="auth-info">
                        <strong>ğŸ”’ éœ€è¦èªè­‰</strong>
                    </div>
                    <div class="test-form">
                        <div class="form-row">
                            <label>æ–‡ç«  Slug</label>
                            <input type="text" id="delete-slug" value="">
                        </div>
                        <button class="btn-primary" onclick="testArticleDelete()">ç™¼é€è«‹æ±‚</button>
                    </div>
                    <div id="result-article-delete" class="result-box"></div>
                </div>

                <!-- è©•è«–åˆ—è¡¨ -->
                <div id="test-comments-list" class="test-section">
                    <h2>è©•è«–åˆ—è¡¨ API</h2>
                    <div class="test-form">
                        <div class="form-row">
                            <label>æ–‡ç«  ID</label>
                            <input type="number" id="comments-article-id" value="1">
                        </div>
                        <button class="btn-primary" onclick="testCommentsList()">ç™¼é€è«‹æ±‚</button>
                    </div>
                    <div id="result-comments-list" class="result-box"></div>
                </div>

                <!-- ç™¼è¡¨è©•è«– -->
                <div id="test-comment-create" class="test-section">
                    <h2>ç™¼è¡¨è©•è«– API (è¨ªå®¢)</h2>
                    <div class="test-form">
                        <div class="form-row">
                            <label>æ–‡ç«  ID</label>
                            <input type="number" id="comment-article-id" value="1">
                        </div>
                        <div class="form-row">
                            <label>å§“å</label>
                            <input type="text" id="comment-name" value="è¨ªå®¢">
                        </div>
                        <div class="form-row">
                            <label>Email</label>
                            <input type="email" id="comment-email" value="guest@example.com">
                        </div>
                        <div class="form-row">
                            <label>è©•è«–å…§å®¹</label>
                            <textarea id="comment-content">é€™æ˜¯ä¸€æ¢æ¸¬è©¦è©•è«–</textarea>
                        </div>
                        <button class="btn-primary" onclick="testCommentCreate()">ç™¼é€è«‹æ±‚</button>
                    </div>
                    <div id="result-comment-create" class="result-box"></div>
                </div>

                <!-- åˆ†é¡åˆ—è¡¨ -->
                <div id="test-categories" class="test-section">
                    <h2>åˆ†é¡åˆ—è¡¨ API</h2>
                    <div class="test-form">
                        <button class="btn-primary" onclick="testCategories()">ç™¼é€è«‹æ±‚</button>
                    </div>
                    <div id="result-categories" class="result-box"></div>
                </div>

                <!-- æ¨™ç±¤åˆ—è¡¨ -->
                <div id="test-tags" class="test-section">
                    <h2>æ¨™ç±¤åˆ—è¡¨ API</h2>
                    <div class="test-form">
                        <button class="btn-primary" onclick="testTags()">ç™¼é€è«‹æ±‚</button>
                    </div>
                    <div id="result-tags" class="result-box"></div>
                </div>

                <!-- Token åˆ·æ–° -->
                <div id="test-refresh" class="test-section">
                    <h2>åˆ·æ–° Token API</h2>
                    <div class="auth-info">
                        <strong>â„¹ï¸ ä½¿ç”¨ HttpOnly Cookie</strong>
                        ç™»å…¥å¾Œæœƒè‡ªå‹•è¨­ç½® refresh_token cookie
                    </div>
                    <div class="test-form">
                        <button class="btn-primary" onclick="testRefresh()">ç™¼é€è«‹æ±‚</button>
                    </div>
                    <div id="result-refresh" class="result-box"></div>
                </div>

                <!-- ç™»å‡º -->
                <div id="test-logout" class="test-section">
                    <h2>ç™»å‡º API</h2>
                    <div class="test-form">
                        <button class="btn-primary" onclick="testLogout()">ç™¼é€è«‹æ±‚</button>
                    </div>
                    <div id="result-logout" class="result-box"></div>
                </div>

                <!-- åœ–ç‰‡ä¸Šå‚³ -->
                <div id="test-upload" class="test-section">
                    <h2>åœ–ç‰‡ä¸Šå‚³ API</h2>
                    <div class="auth-info">
                        <strong>ğŸ”’ éœ€è¦èªè­‰</strong>
                        ä½¿ç”¨ /api/posts ç«¯é»ä¸Šå‚³ (Weibo å…±ç”¨)
                    </div>
                    <div class="test-form">
                        <div class="form-row">
                            <label>é¸æ“‡åœ–ç‰‡</label>
                            <input type="file" id="upload-file" accept="image/*">
                        </div>
                        <button class="btn-primary" onclick="testUpload()">ç™¼é€è«‹æ±‚</button>
                    </div>
                    <div id="result-upload" class="result-box"></div>
                </div>

                <!-- å¯©æ ¸è©•è«– -->
                <div id="test-comment-approve" class="test-section">
                    <h2>å¯©æ ¸è©•è«– API</h2>
                    <div class="auth-info">
                        <strong>ğŸ”’ éœ€è¦èªè­‰</strong>
                    </div>
                    <div class="test-form">
                        <div class="form-row">
                            <label>è©•è«– ID</label>
                            <input type="number" id="approve-id" value="">
                        </div>
                        <div class="form-row">
                            <label>ç‹€æ…‹</label>
                            <select id="approve-status">
                                <option value="approved">é€šé</option>
                                <option value="rejected">æ‹’çµ•</option>
                            </select>
                        </div>
                        <button class="btn-primary" onclick="testCommentApprove()">ç™¼é€è«‹æ±‚</button>
                    </div>
                    <div id="result-comment-approve" class="result-box"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const BASE_URL = 'https://pyqapi.3331322.xyz';
        let accessToken = localStorage.getItem('access_token') || '';

        function showTest(testId) {
            // éš±è—æ‰€æœ‰æ¸¬è©¦å€å¡Š
            document.querySelectorAll('.test-section').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.test-btn').forEach(el => el.classList.remove('active'));

            // é¡¯ç¤ºé¸ä¸­çš„æ¸¬è©¦
            document.getElementById('test-' + testId).classList.add('active');
            event.target.classList.add('active');
        }

        function displayResult(resultId, data, success = true) {
            const el = document.getElementById('result-' + resultId);
            const statusBadge = success ?
                '<span class="status-badge status-success">âœ“ æˆåŠŸ</span>' :
                '<span class="status-badge status-error">âœ— å¤±æ•—</span>';

            el.innerHTML = `
                <div style="margin-bottom: 10px;">
                    <strong>éŸ¿æ‡‰çµæœ ${statusBadge}</strong>
                </div>
                <pre>${JSON.stringify(data, null, 2)}</pre>
            `;
        }

        // ç™»å…¥
        async function testLogin() {
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;

            try {
                const response = await fetch(`${BASE_URL}/api/login`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    credentials: 'include',
                    body: JSON.stringify({ email, password })
                });
                const data = await response.json();

                if (data.success && data.data.access_token) {
                    accessToken = data.data.access_token;
                    localStorage.setItem('access_token', accessToken);
                }

                displayResult('login', data, response.ok);
            } catch (error) {
                displayResult('login', { error: error.message }, false);
            }
        }

        // æ–‡ç« åˆ—è¡¨
        async function testArticlesList() {
            const status = document.getElementById('articles-status').value;
            const limit = document.getElementById('articles-limit').value;

            let url = `${BASE_URL}/api/blog/articles?limit=${limit}`;
            if (status) url += `&status=${status}`;

            try {
                const response = await fetch(url);
                const data = await response.json();
                displayResult('articles-list', data, response.ok);
            } catch (error) {
                displayResult('articles-list', { error: error.message }, false);
            }
        }

        // æ–‡ç« è©³æƒ…
        async function testArticleDetail() {
            const slug = document.getElementById('article-slug').value;

            try {
                const response = await fetch(`${BASE_URL}/api/blog/articles/${slug}`);
                const data = await response.json();
                displayResult('article-detail', data, response.ok);
            } catch (error) {
                displayResult('article-detail', { error: error.message }, false);
            }
        }

        // å‰µå»ºæ–‡ç« 
        async function testArticleCreate() {
            const title = document.getElementById('create-title').value;
            const content = document.getElementById('create-content').value;
            const excerpt = document.getElementById('create-excerpt').value;
            const status = document.getElementById('create-status').value;
            const tags = document.getElementById('create-tags').value.split(',').map(t => t.trim());

            try {
                const response = await fetch(`${BASE_URL}/api/blog/articles`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${accessToken}`
                    },
                    body: JSON.stringify({ title, content, excerpt, status, tag_names: tags })
                });
                const data = await response.json();
                displayResult('article-create', data, response.ok);
            } catch (error) {
                displayResult('article-create', { error: error.message }, false);
            }
        }

        // æ›´æ–°æ–‡ç« 
        async function testArticleUpdate() {
            const slug = document.getElementById('update-slug').value;
            const title = document.getElementById('update-title').value;

            try {
                const response = await fetch(`${BASE_URL}/api/blog/articles/${slug}`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${accessToken}`
                    },
                    body: JSON.stringify({ title })
                });
                const data = await response.json();
                displayResult('article-update', data, response.ok);
            } catch (error) {
                displayResult('article-update', { error: error.message }, false);
            }
        }

        // åˆªé™¤æ–‡ç« 
        async function testArticleDelete() {
            const slug = document.getElementById('delete-slug').value;

            try {
                const response = await fetch(`${BASE_URL}/api/blog/articles/${slug}`, {
                    method: 'DELETE',
                    headers: { 'Authorization': `Bearer ${accessToken}` }
                });
                const data = await response.json();
                displayResult('article-delete', data, response.ok);
            } catch (error) {
                displayResult('article-delete', { error: error.message }, false);
            }
        }

        // è©•è«–åˆ—è¡¨
        async function testCommentsList() {
            const articleId = document.getElementById('comments-article-id').value;

            try {
                const response = await fetch(`${BASE_URL}/api/blog/articles/${articleId}/comments`);
                const data = await response.json();
                displayResult('comments-list', data, response.ok);
            } catch (error) {
                displayResult('comments-list', { error: error.message }, false);
            }
        }

        // ç™¼è¡¨è©•è«–
        async function testCommentCreate() {
            const articleId = document.getElementById('comment-article-id').value;
            const name = document.getElementById('comment-name').value;
            const email = document.getElementById('comment-email').value;
            const content = document.getElementById('comment-content').value;

            try {
                const response = await fetch(`${BASE_URL}/api/blog/articles/${articleId}/comments`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ author_name: name, author_email: email, content })
                });
                const data = await response.json();
                displayResult('comment-create', data, response.ok);
            } catch (error) {
                displayResult('comment-create', { error: error.message }, false);
            }
        }

        // å¯©æ ¸è©•è«–
        async function testCommentApprove() {
            const id = document.getElementById('approve-id').value;
            const status = document.getElementById('approve-status').value;

            try {
                const response = await fetch(`${BASE_URL}/api/blog/comments/${id}/moderate`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${accessToken}`
                    },
                    body: JSON.stringify({ status })
                });
                const data = await response.json();
                displayResult('comment-approve', data, response.ok);
            } catch (error) {
                displayResult('comment-approve', { error: error.message }, false);
            }
        }

        // åˆ†é¡åˆ—è¡¨
        async function testCategories() {
            try {
                const response = await fetch(`${BASE_URL}/api/blog/categories`);
                const data = await response.json();
                displayResult('categories', data, response.ok);
            } catch (error) {
                displayResult('categories', { error: error.message }, false);
            }
        }

        // æ¨™ç±¤åˆ—è¡¨
        async function testTags() {
            try {
                const response = await fetch(`${BASE_URL}/api/blog/tags`);
                const data = await response.json();
                displayResult('tags', data, response.ok);
            } catch (error) {
                displayResult('tags', { error: error.message }, false);
            }
        }

        // åˆ·æ–° Token
        async function testRefresh() {
            try {
                const response = await fetch(`${BASE_URL}/api/token/refresh`, {
                    method: 'POST',
                    credentials: 'include'
                });
                const data = await response.json();

                if (data.success && data.data.access_token) {
                    accessToken = data.data.access_token;
                    localStorage.setItem('access_token', accessToken);
                }

                displayResult('refresh', data, response.ok);
            } catch (error) {
                displayResult('refresh', { error: error.message }, false);
            }
        }

        // ç™»å‡º
        async function testLogout() {
            try {
                const response = await fetch(`${BASE_URL}/api/logout`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${accessToken}`
                    },
                    credentials: 'include'
                });
                const data = await response.json();

                if (data.success) {
                    accessToken = '';
                    localStorage.removeItem('access_token');
                }

                displayResult('logout', data, response.ok);
            } catch (error) {
                displayResult('logout', { error: error.message }, false);
            }
        }

        // åœ–ç‰‡ä¸Šå‚³
        async function testUpload() {
            const fileInput = document.getElementById('upload-file');
            const file = fileInput.files[0];

            if (!file) {
                alert('è«‹é¸æ“‡åœ–ç‰‡');
                return;
            }

            const formData = new FormData();
            formData.append('content', 'Cover upload');
            formData.append('visibility', 'private');
            formData.append('images[]', file);

            try {
                const response = await fetch(`${BASE_URL}/api/posts`, {
                    method: 'POST',
                    headers: { 'Authorization': `Bearer ${accessToken}` },
                    body: formData
                });
                const data = await response.json();
                displayResult('upload', data, response.ok);
            } catch (error) {
                displayResult('upload', { error: error.message }, false);
            }
        }

        // é é¢è¼‰å…¥æ™‚é¡¯ç¤ºç•¶å‰ token ç‹€æ…‹
        window.addEventListener('DOMContentLoaded', () => {
            if (accessToken) {
                console.log('å·²ä¿å­˜ Access Token:', accessToken);
            } else {
                console.log('ç„¡ Access Tokenï¼Œè«‹å…ˆç™»å…¥');
            }
        });
    </script>
</body>

</html>